import{e as l,n as x,i as H,y as c,j as f,b as m,t as K,o as O}from"./web-DuEVvOp5.js";import{B as U}from"./BoardView-BhTIAIwV.js";import{C as V}from"./chess-lriRiorr.js";import{u as J,s as Q,S as W,t as R,p as X}from"./Context-D0aeQrfF.js";import{u as Y,E as Z,a as ee,b as te}from"./RepertoireCard-DZ_THEJ2.js";import{G as oe}from"./GameInterfaceCard-Dd9D52Wt.js";import{h as ne}from"./routing-Bp67eWU0.js";import"./index-HbBCBvHV.js";import"./UKTBL2JL-CnBKWN1M.js";import"./FN6EICGO-iZF3THgN.js";var re=K('<main class="flex flex-grow px-8 gap-6 py-6 justify-center relative "><!$><!/><div class="tools-container justify-start flex flex-grow shrink flex-col *:shrink gap-4 max-w-[500px] min-w-[300px] max-h-full overflow-auto"><!$><!/><!$><!/><!$><!/><!$><!/>');function ue(){const h=J(),[$,A]=l(null),e=new V,[a,_]=l([]);let r=0;const[v,B]=l(Q()),[d,F]=l("white"),[S,y]=l(!1),b=Y(),C=ne();x(()=>{if(C.fen){const t=decodeURIComponent(C.fen);e.load(t)}else e.load(W);i()}),x(O(b,()=>{const t=b();if(t){if(t.key==="ArrowLeft"){const o=a().slice(0,Math.max(0,r));r=Math.max(-1,r-1),e.reset();for(const s of o)e.move(s);i()}if(t.key==="ArrowRight"){r=Math.min(a().length-1,r+1);const o=a().slice(0,r+1);e.reset();for(const s of o)e.move(s);i()}}}));const i=()=>{const t=e.fen();console.log(t),h.engine.enqueue_main(t),B(t);const o=e.turn()==="w"?"white":"black";$()?.set({turnColor:o,orientation:d(),fen:e.fen(),movable:{color:o,free:!1,dests:R(e)}})},g=t=>{const o=e.fen();try{e.move(t)}catch{e.load(o)}_(e.history()),r=a().length-1,i()},I=(t,o)=>{const s=t+o,p=e.fen(),n=X(p,s);if(n){if(S()){h.repertoire.addLine(p,n),y(!1);return}g(n)}},L=()=>{console.log("reset"),e.reset(),_(e.history()),r=-1,i()};return x(()=>{$()?.set({orientation:d(),movable:{color:"white",dests:R(e),events:{after:I}}})}),(()=>{var t=H(re),o=t.firstChild,[s,p]=c(o.nextSibling),n=s.nextSibling,M=n.firstChild,[w,N]=c(M.nextSibling),j=w.nextSibling,[k,G]=c(j.nextSibling),P=k.nextSibling,[E,q]=c(P.nextSibling),z=E.nextSibling,[D,T]=c(z.nextSibling);return f(t,m(U,{setApi:A,class:"z-10 relative",get style(){return{border:S()?"3px solid red":""}}}),s,p),f(n,m(Z,{onSelect:u=>g(u)}),w,N),f(n,m(oe,{history:a,restart:()=>L(),setOrientation:F}),k,G),f(n,m(ee,{get fen(){return v()},requestLine:()=>y(!0)}),E,q),f(n,m(te,{get fen(){return v()},get playerColor(){return d()},onSelect:u=>g(u)}),D,T),t})()}export{ue as default};
